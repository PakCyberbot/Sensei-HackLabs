#!/bin/bash

# Prompt user for CTF name
read -p "Enter CTF name: " CTF

# Create directory and navigate to it
if [ -d "$HOME/CTF/$CTF" ]; then
    echo "CTF already exists.Continuing.."
else
    mkdir -p ~/CTF/"$CTF"
fi

cd ~/CTF/"$CTF"

# Prompt user for TARGET IP
read -p "Enter TARGET IP: " TARGET

# Update ~/.myterm_settings with TARGET and CTF values
sed -i -e "s/^\(export TARGET=\).*/\1$TARGET/" -e "s/^\(export CTF=\).*/\1$CTF/" ~/.myterm_settings


# Start Notes Mark Text
if [ ! -d "$HOME/Documents/pentest_notes" ]; then
    mkdir -p "$HOME/Documents/pentest_notes"
fi

if [ ! -e "$HOME/Documents/pentest_notes/$CTF.md" ]; then

# Populating the md template for pentesting
cat << EOF > "$HOME/Documents/pentest_notes/$CTF.md"
# $CTF
## Nmap Scan
\`\`\`
Simple Scan:

Aggressive Full Scan:

\`\`\`

## Service Enumeration
#### Web enum (port 80, )
#### FTP


## Potential Vulnerabilities
- 

## Exploitation


## Post Exploitation
#### Enumeration
#### Potential Priv Esc Vectors
### Priv Escalation
EOF

fi

marktext "$HOME/Documents/pentest_notes/$CTF.md"&

# Opening Terminator Pentesting Layout 
terminator --layout=Pentesting

# Display a message
echo "CTF environment created."
